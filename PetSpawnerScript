local HttpService = game:GetService("HttpService")
local TeleportService = game:GetService("TeleportService")
local Players = game:GetService("Players")
local player = Players.LocalPlayer

local function isServerAlive(placeId, jobId)
    local success, result = pcall(function()
        return game:HttpGet(string.format("https://games.roblox.com/v1/games/%d/servers/Public?limit=100", placeId))
    end)
    if success then
        local data = HttpService:JSONDecode(result)
        for _, server in ipairs(data.data) do
            if server.id == jobId then
                return true, server.playing, server.maxPlayers
            end
        end
    end
    return false
end

JoinJobBtn.MouseButton1Click:Connect(function()
    local placeId = tonumber(PlaceBox.Text)
    local jobId = JobBox.Text
    if placeId and jobId ~= "" then
        local alive, players, maxPlayers = isServerAlive(placeId, jobId)
        if alive then
            print("Joining server:", jobId, string.format("(%d/%d players)", players, maxPlayers))
            TeleportService:TeleportToPlaceInstance(placeId, jobId, player)
        else
            warn("Server not found or no longer available.")
        end
    else
        warn("Please enter both a valid Place ID and Job ID.")
    end
end)
